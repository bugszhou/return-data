{"version":3,"file":"return-data.min.js","sources":["../src/index.ts"],"sourcesContent":["/*\n * @Author: youzhao.zhou\n * @Date: 2021-08-19 16:51:33\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-09-08 17:17:20\n * @Description 统一返回格式\n */\n\nimport { IReturnData } from \"./BaseReturn\";\n\n/**\n * 统一返回格式\n */\nexport default class ReturnData<T = any> {\n  /**\n   * 状态值类型\n   *\n   * ok -- 成功\n   * deny -- 用户拒绝或系统拒绝\n   * fail -- 执行失败\n   */\n  private status: string;\n\n  private data: T | null;\n\n  private msg = \"\";\n\n  constructor(\n    status: string,\n    data: T | null | undefined = null,\n    msg = \"success\",\n  ) {\n    this.status = status;\n    this.data = data;\n    this.msg = msg;\n  }\n\n  getStatus(): string {\n    return this.status;\n  }\n\n  getData(): T | null {\n    return this.data;\n  }\n\n  getMsg(): string {\n    return this.msg;\n  }\n\n  setMsg(msg: string): void {\n    this.msg = msg;\n  }\n\n  /**\n   * 判断是否成功\n   * @param {ReturnData} data\n   * @returns boolean\n   */\n  static isOk(data: ReturnData): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"ok\";\n  }\n\n  static isFail(data: ReturnData): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"fail\";\n  }\n\n  static isDeny(data: ReturnData): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"deny\";\n  }\n\n  /**\n   * \b返回成功\n   * @param data\n   * @returns ReturnData\n   */\n  static success<IData = any>(data?: IData) {\n    return new ReturnData<IData>(\"ok\", data);\n  }\n\n  /**\n   * 返回失败\n   * @returns ReturnData\n   */\n  static fail(msg?: string) {\n    const data = new ReturnData(\"fail\", null);\n    data.setMsg(msg || \"\");\n    return data;\n  }\n\n  /**\n   * 统一异常处理\n   * @param {IReturnData} ex\n   * @returns\n   */\n  static exception(ex: IReturnData<null>) {\n    return new ReturnData<null>(ex.getStatus(), ex.getData(), ex.getMsg());\n  }\n\n  /**\n   * 返回拒绝\n   * @returns ReturnData\n   */\n  static deny() {\n    return new ReturnData(\"deny\", null);\n  }\n}\n\nfunction getStatusIsFunction(param: any) {\n  return param && typeof param.getStatus === \"function\";\n}\n"],"names":["getStatusIsFunction","param","getStatus","status","data","msg","this","ReturnData","setMsg","ex","getData","getMsg"],"mappings":"2OA2GA,SAASA,EAAoBC,GAC3B,OAAOA,GAAoC,mBAApBA,EAAMC,4BAjF7B,WACEC,EACAC,EACAC,gBADAD,qBACAC,aALMC,SAAM,GAOZA,KAAKH,OAASA,EACdG,KAAKF,KAAOA,EACZE,KAAKD,IAAMA,EAuEf,OApEEE,sBAAA,WACE,OAAOD,KAAKH,QAGdI,oBAAA,WACE,OAAOD,KAAKF,MAGdG,mBAAA,WACE,OAAOD,KAAKD,KAGdE,mBAAA,SAAOF,GACLC,KAAKD,IAAMA,GAQNE,OAAP,SAAYH,GACV,OAAOJ,EAAoBI,IAA8B,OAArBA,EAAKF,aAGpCK,SAAP,SAAcH,GACZ,OAAOJ,EAAoBI,IAA8B,SAArBA,EAAKF,aAGpCK,SAAP,SAAcH,GACZ,OAAOJ,EAAoBI,IAA8B,SAArBA,EAAKF,aAQpCK,UAAP,SAA4BH,GAC1B,OAAO,IAAIG,EAAkB,KAAMH,IAO9BG,OAAP,SAAYF,GACV,IAAMD,EAAO,IAAIG,EAAW,OAAQ,MAEpC,OADAH,EAAKI,OAAOH,GAAO,IACZD,GAQFG,YAAP,SAAiBE,GACf,OAAO,IAAIF,EAAiBE,EAAGP,YAAaO,EAAGC,UAAWD,EAAGE,WAOxDJ,OAAP,WACE,OAAO,IAAIA,EAAW,OAAQ"}