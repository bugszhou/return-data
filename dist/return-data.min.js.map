{"version":3,"file":"return-data.min.js","sources":["../src/BaseReturn.ts","../src/index.ts"],"sourcesContent":["export interface IReturnData<T = any> {\n  getStatus(): string;\n  getData(): T;\n  getMsg(): string;\n  /**\n   * 获取额外数据\n   */\n  getExtraData(): any;\n  /**\n   * 设置额外数据\n   */\n  setExtraData(data: any): void;\n}\n\nexport default class BaseReturn<IData = any> implements IReturnData {\n  private status = \"\";\n\n  private msg = \"\";\n\n  private data: IData | null = null;\n\n  private extraData: any = null;\n\n  constructor(status = \"\", data: IData | null | undefined = null, msg = \"\") {\n    this.status = status;\n    this.msg = msg;\n    this.data = data;\n  }\n\n  setStatus(status: string) {\n    this.status = status;\n  }\n\n  setMsg(msg: string) {\n    this.msg = msg;\n  }\n\n  setData(data: IData) {\n    this.data = data;\n  }\n\n  getStatus() {\n    return this.status;\n  }\n\n  getData(): IData | null {\n    return this.data;\n  }\n\n  getMsg() {\n    return this.msg;\n  }\n\n  getExtraData() {\n    return this.extraData;\n  }\n\n  setExtraData(data: any) {\n    this.extraData = data;\n  }\n\n  static getStatusIsFunction(param: any) {\n    return param && typeof param.getStatus === \"function\";\n  }\n\n  static getStatusValue(obj: any) {\n    if (BaseReturn.getStatusIsFunction(obj)) {\n      return obj.getStatus();\n    }\n\n    return \"\";\n  }\n\n  /**\n   * 判断是否成功\n   * @param {any} data\n   * @returns boolean\n   */\n  static isOk(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"ok\";\n  }\n\n  static isFail(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"fail\";\n  }\n\n  static isDeny(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"deny\";\n  }\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-08-19 16:51:33\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-09-08 21:01:35\n * @Description 统一返回格式\n */\n\nimport BaseReturn, { IReturnData } from \"./BaseReturn\";\n\nexport { BaseReturn };\n\n/**\n * 统一返回格式\n */\nexport default class ReturnData<T = any> {\n  /**\n   * 状态值类型\n   *\n   * ok -- 成功\n   * deny -- 用户拒绝或系统拒绝\n   * fail -- 执行失败\n   */\n  private status: string;\n\n  private data: T | null;\n\n  private msg = \"\";\n\n  private extraData: any = null;\n\n  constructor(\n    status: string,\n    data: T | null | undefined = null,\n    msg = \"success\",\n  ) {\n    this.status = status;\n    this.data = data;\n    this.msg = msg;\n  }\n\n  getStatus(): string {\n    return this.status;\n  }\n\n  getData(): T | null {\n    return this.data;\n  }\n\n  getMsg(): string {\n    return this.msg;\n  }\n\n  setMsg(msg: string): void {\n    this.msg = msg;\n  }\n\n  getExtraData() {\n    return this.extraData;\n  }\n\n  setExtraData(data: any) {\n    this.extraData = data;\n  }\n\n  /**\n   * 判断是否成功\n   * @param {any} data\n   * @returns boolean\n   */\n  static isOk(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"ok\";\n  }\n\n  static isFail(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"fail\";\n  }\n\n  static isDeny(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"deny\";\n  }\n\n  /**\n   * \b返回成功\n   * @param data\n   * @returns ReturnData\n   */\n  static success<IData = any>(data?: IData) {\n    return new ReturnData<IData>(\"ok\", data);\n  }\n\n  /**\n   * 返回失败\n   * @returns ReturnData\n   */\n  static fail(msg?: string) {\n    const data = new ReturnData(\"fail\", null);\n    data.setMsg(msg || \"\");\n    return data;\n  }\n\n  /**\n   * 统一异常处理\n   * @param {IReturnData} ex\n   * @returns\n   */\n  static exception(ex: IReturnData<null>) {\n    return new ReturnData<null>(ex.getStatus(), ex.getData(), ex.getMsg());\n  }\n\n  /**\n   * 返回拒绝\n   * @returns ReturnData\n   */\n  static deny() {\n    return new ReturnData(\"deny\", null);\n  }\n}\n\nfunction getStatusIsFunction(param: any) {\n  return param && typeof param.getStatus === \"function\";\n}\n"],"names":["status","data","msg","this","BaseReturn","extraData","param","getStatus","obj","getStatusIsFunction","ReturnData","setMsg","ex","getData","getMsg"],"mappings":"mQAuBE,WAAYA,EAAaC,EAAuCC,gBAApDF,mBAAaC,qBAAuCC,MARxDC,YAAS,GAETA,SAAM,GAENA,UAAqB,KAErBA,eAAiB,KAGvBA,KAAKH,OAASA,EACdG,KAAKD,IAAMA,EACXC,KAAKF,KAAOA,EA+DhB,OA5DEG,sBAAA,SAAUJ,GACRG,KAAKH,OAASA,GAGhBI,mBAAA,SAAOF,GACLC,KAAKD,IAAMA,GAGbE,oBAAA,SAAQH,GACNE,KAAKF,KAAOA,GAGdG,sBAAA,WACE,OAAOD,KAAKH,QAGdI,oBAAA,WACE,OAAOD,KAAKF,MAGdG,mBAAA,WACE,OAAOD,KAAKD,KAGdE,yBAAA,WACE,OAAOD,KAAKE,WAGdD,yBAAA,SAAaH,GACXE,KAAKE,UAAYJ,GAGZG,sBAAP,SAA2BE,GACzB,OAAOA,GAAoC,mBAApBA,EAAMC,WAGxBH,iBAAP,SAAsBI,GACpB,OAAIJ,EAAWK,oBAAoBD,GAC1BA,EAAID,YAGN,IAQFH,OAAP,SAAYH,GACV,OAAOG,EAAWK,oBAAoBR,IAA8B,OAArBA,EAAKM,aAG/CH,SAAP,SAAcH,GACZ,OAAOG,EAAWK,oBAAoBR,IAA8B,SAArBA,EAAKM,aAG/CH,SAAP,SAAcH,GACZ,OAAOG,EAAWK,oBAAoBR,IAA8B,SAArBA,EAAKM,+BCxDtD,WACEP,EACAC,EACAC,gBADAD,qBACAC,aAPMC,SAAM,GAENA,eAAiB,KAOvBA,KAAKH,OAASA,EACdG,KAAKF,KAAOA,EACZE,KAAKD,IAAMA,EA+Ef,OA5EEQ,sBAAA,WACE,OAAOP,KAAKH,QAGdU,oBAAA,WACE,OAAOP,KAAKF,MAGdS,mBAAA,WACE,OAAOP,KAAKD,KAGdQ,mBAAA,SAAOR,GACLC,KAAKD,IAAMA,GAGbQ,yBAAA,WACE,OAAOP,KAAKE,WAGdK,yBAAA,SAAaT,GACXE,KAAKE,UAAYJ,GAQZS,OAAP,SAAYT,GACV,OAAOQ,EAAoBR,IAA8B,OAArBA,EAAKM,aAGpCG,SAAP,SAAcT,GACZ,OAAOQ,EAAoBR,IAA8B,SAArBA,EAAKM,aAGpCG,SAAP,SAAcT,GACZ,OAAOQ,EAAoBR,IAA8B,SAArBA,EAAKM,aAQpCG,UAAP,SAA4BT,GAC1B,OAAO,IAAIS,EAAkB,KAAMT,IAO9BS,OAAP,SAAYR,GACV,IAAMD,EAAO,IAAIS,EAAW,OAAQ,MAEpC,OADAT,EAAKU,OAAOT,GAAO,IACZD,GAQFS,YAAP,SAAiBE,GACf,OAAO,IAAIF,EAAiBE,EAAGL,YAAaK,EAAGC,UAAWD,EAAGE,WAOxDJ,OAAP,WACE,OAAO,IAAIA,EAAW,OAAQ,YAIlC,SAASD,EAAoBH,GAC3B,OAAOA,GAAoC,mBAApBA,EAAMC"}