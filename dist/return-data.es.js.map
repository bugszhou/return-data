{"version":3,"file":"return-data.es.js","sources":["../src/BaseReturn.ts","../src/index.ts"],"sourcesContent":["export interface IReturnData<T = any> {\n  getStatus(): string;\n  getData(): T;\n  getMsg(): string;\n  /**\n   * 获取额外数据\n   */\n  getExtraData(): any;\n  /**\n   * 设置额外数据\n   */\n  setExtraData(data: any): void;\n}\n\nexport default class BaseReturn<IData = any> implements IReturnData {\n  private status = \"\";\n\n  private msg = \"\";\n\n  private data: IData | null = null;\n\n  private extraData: any = null;\n\n  constructor(status = \"\", data: IData | null | undefined = null, msg = \"\") {\n    this.status = status;\n    this.msg = msg;\n    this.data = data;\n  }\n\n  setStatus(status: string) {\n    this.status = status;\n  }\n\n  setMsg(msg: string) {\n    this.msg = msg;\n  }\n\n  setData(data: IData) {\n    this.data = data;\n  }\n\n  getStatus() {\n    return this.status;\n  }\n\n  getData(): IData | null {\n    return this.data;\n  }\n\n  getMsg() {\n    return this.msg;\n  }\n\n  getExtraData() {\n    return this.extraData;\n  }\n\n  setExtraData(data: any) {\n    this.extraData = data;\n  }\n\n  static getStatusIsFunction(param: any) {\n    return param && typeof param.getStatus === \"function\";\n  }\n\n  static getStatusValue(obj: any) {\n    if (BaseReturn.getStatusIsFunction(obj)) {\n      return obj.getStatus();\n    }\n\n    return \"\";\n  }\n\n  /**\n   * 判断是否成功\n   * @param {any} data\n   * @returns boolean\n   */\n  static isOk(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"ok\";\n  }\n\n  static isFail(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"fail\";\n  }\n\n  static isDeny(data: any): boolean {\n    return BaseReturn.getStatusIsFunction(data) && data.getStatus() === \"deny\";\n  }\n\n  /**\n   * 是否是网络错误\n   * @param data\n   * @returns\n   */\n  static isNetWorkError(data: any) {\n    return (\n      BaseReturn.getStatusIsFunction(data) &&\n      data.getStatus() === \"NETWORK_ERROR\"\n    );\n  }\n\n  /**\n   * 判断data是不是null或者undefined\n   * @param param\n   * @returns\n   */\n  static hasData(param: any): boolean {\n    if (!param || typeof param.getData !== \"function\") {\n      return false;\n    }\n    const data = param.getData();\n    return !(typeof data === \"undefined\" || data === null);\n  }\n}\n","/*\n * @Author: youzhao.zhou\n * @Date: 2021-08-19 16:51:33\n * @Last Modified by: youzhao.zhou\n * @Last Modified time: 2021-09-08 21:01:35\n * @Description 统一返回格式\n */\n\nimport BaseReturn, { IReturnData } from \"./BaseReturn\";\n\nexport { BaseReturn };\n\n/**\n * 统一返回格式\n */\nexport default class ReturnData<T = any> {\n  /**\n   * 状态值类型\n   *\n   * ok -- 成功\n   * deny -- 用户拒绝或系统拒绝\n   * fail -- 执行失败\n   */\n  private status: string;\n\n  private data: T | null;\n\n  private msg = \"\";\n\n  private extraData: any = null;\n\n  constructor(\n    status: string,\n    data: T | null | undefined = null,\n    msg = \"success\",\n  ) {\n    this.status = status;\n    this.data = data;\n    this.msg = msg;\n  }\n\n  getStatus(): string {\n    return this.status;\n  }\n\n  getData(): T | null {\n    return this.data;\n  }\n\n  getMsg(): string {\n    return this.msg;\n  }\n\n  setMsg(msg: string): void {\n    this.msg = msg;\n  }\n\n  getExtraData() {\n    return this.extraData;\n  }\n\n  setExtraData(data: any) {\n    this.extraData = data;\n  }\n\n  /**\n   * 判断是否成功\n   * @param {any} data\n   * @returns boolean\n   */\n  static isOk(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"ok\";\n  }\n\n  static isFail(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"fail\";\n  }\n\n  static isDeny(data: any): boolean {\n    return getStatusIsFunction(data) && data.getStatus() === \"deny\";\n  }\n\n  /**\n   * 判断data是不是null或者undefined\n   * @param param\n   * @returns\n   */\n  static hasData(param: any): boolean {\n    if (!param || typeof param.getData !== \"function\") {\n      return false;\n    }\n    const data = param.getData();\n    return !(typeof data === \"undefined\" || data === null);\n  }\n\n  /**\n   * 是否是网络错误\n   * @param data\n   * @returns\n   */\n  static isNetWorkError(data: any) {\n    return (\n      BaseReturn.getStatusIsFunction(data) &&\n      data.getStatus() === \"NETWORK_ERROR\"\n    );\n  }\n\n  /**\n   * \b返回成功\n   * @param data\n   * @returns ReturnData\n   */\n  static success<IData = any>(data?: IData) {\n    return new ReturnData<IData>(\"ok\", data);\n  }\n\n  /**\n   * 返回失败\n   * @returns ReturnData\n   */\n  static fail(msg?: string) {\n    const data = new ReturnData(\"fail\", null);\n    data.setMsg(msg || \"\");\n    return data;\n  }\n\n  /**\n   * 统一异常处理\n   * @param {IReturnData} ex\n   * @returns\n   */\n  static exception(ex: IReturnData<null>) {\n    return new ReturnData<null>(ex.getStatus(), ex.getData(), ex.getMsg());\n  }\n\n  /**\n   * 返回拒绝\n   * @returns ReturnData\n   */\n  static deny() {\n    return new ReturnData(\"deny\", null);\n  }\n\n  /**\n   * 网络异常返回类\n   * @returns ReturnData\n   */\n  static networkError() {\n    return new ReturnData(\"NETWORK_ERROR\", null, \"网络异常，请重试\");\n  }\n}\n\nfunction getStatusIsFunction(param: any) {\n  return param && typeof param.getStatus === \"function\";\n}\n"],"names":[],"mappings":"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"}